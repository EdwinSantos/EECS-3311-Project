<HTML><HEAD>
<meta name="description" content="Main window of ETF project."/>
<meta name="generator" content="EiffelBuild"/>
<meta name="keywords" content="Eiffel class"/>
<meta name="keywords" content="Eiffel class"/>
<TITLE>etf_main_window Text</TITLE></HEAD>
<BODY BGCOLOR="white">
<P ALIGN="CENTER">Automatic generation produced by ISE Eiffel</P>
<PRE><TABLE BORDER="1" ALIGN="CENTER"><TR><TD><A HREF="../class_list.html">Classes</A></TD><TD><A HREF="../cluster_list.html">Clusters</A></TD><TD><A HREF="../cluster_hierarchy.html">Cluster hierarchy</A></TD><TD><A HREF="etf_main_window_chart.html">Chart</A></TD><TD><A HREF="etf_main_window_links.html">Relations</A></TD><TD>Text</TD><TD><A HREF="etf_main_window_flat.html">Flat</A></TD><TD><A HREF="etf_main_window_short.html">Contracts</A></TD><TD><A HREF="etf_main_window_flatshort.html">Flat contracts</A></TD></TR></TABLE><B>note</B>
    description: "Main window of ETF project."
    generator: "EiffelBuild"
    date: "$Date: 2010-12-22 10:39:24 -0800 (Wed, 22 Dec 2010) $"
    revision: "$Revision: 85202 $"

<B>class</B> 
    <A HREF="../tracker/etf_main_window.html">ETF_MAIN_WINDOW</A>

<B>inherit</B>
    <A HREF="../tracker/etf_main_window_imp.html">ETF_MAIN_WINDOW_IMP</A>
        <B>rename</B>
            raise <B>as</B> main_window_raise
        <B>end</B>

    EXCEPTIONS
        <B>rename</B>
            raise <B>as</B> exceptions_raise
        <B>undefine</B>
            default_create,
            copy
        <B>end</B>

<B>create</B> 
    default_create

<B>feature</B> {NONE} <FONT COLOR="red">--</FONT><FONT COLOR="red"> Initialization</FONT>

    <A NAME="f_user_create_interface_objects"><A HREF="../tracker/etf_main_window.html#f_user_create_interface_objects">user_create_interface_objects</A>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Create any auxilliary objects needed for MAIN_WINDOW.</FONT>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Initialization for these objects must be performed in </FONT><A HREF="../tracker/etf_main_window.html#f_user_initialization">user_initialization</A><FONT COLOR="red">.</FONT>
        <B>do</B>
            <B>create</B> <A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_make">make</A>
            <B>create</B> <A HREF="../tracker/etf_main_window.html#f_session_file">session_file</A>.make_with_name (<A HREF="../tracker/etf_main_window.html#f_session_file_path">Session_file_path</A>)
            <A HREF="../tracker/etf_main_window_imp.html#f_output">output</A>.insert_text (<A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_model">model</A>.<A HREF="../tracker/etf_model.html#f_out">out</A>)
            <A HREF="../tracker/etf_main_window_imp.html#f_status">status</A>.insert_text ("List of commands: %N")
            <A HREF="../tracker/etf_main_window_imp.html#f_status">status</A>.insert_text ("================= %N")
            <A HREF="../tracker/etf_main_window_imp.html#f_status">status</A>.insert_text (<A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_man_page">Man_page</A>)
        <B>end</B></A>

    <A NAME="f_user_initialization"><A HREF="../tracker/etf_main_window.html#f_user_initialization">user_initialization</A>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Perform any initialization on objects created by </FONT><A HREF="../tracker/etf_main_window.html#f_user_create_interface_objects">user_create_interface_objects</A>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> and from within current class itself.</FONT>
        <B>do</B>
        <B>end</B></A>
    
<B>feature</B> {NONE} <FONT COLOR="red">--</FONT><FONT COLOR="red"> Business Object</FONT>

    <A NAME="f_business_obj"><A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>: <A HREF="../tracker/etf_model_facade.html">ETF_MODEL_FACADE</A></A>

    <A NAME="f_session_file"><A HREF="../tracker/etf_main_window.html#f_session_file">session_file</A>: PLAIN_TEXT_FILE</A>

    <A NAME="f_session_file_path"><A HREF="../tracker/etf_main_window.html#f_session_file_path">Session_file_path</A>: STRING_8 = "./session.txt"</A>
    
<B>feature</B> {NONE} <FONT COLOR="red">--</FONT><FONT COLOR="red"> Auxiliary Commands</FONT>

    <A NAME="f_clear_display"><A HREF="../tracker/etf_main_window.html#f_clear_display">clear_display</A>
        <B>do</B>
            <A HREF="../tracker/etf_main_window_imp.html#f_output">output</A>.set_text ("")
            <A HREF="../tracker/etf_main_window_imp.html#f_status">status</A>.set_text ("")
            <A HREF="../tracker/etf_main_window_imp.html#f_command">command</A>.set_text ("")
            <A HREF="../tracker/etf_main_window_imp.html#f_history">history</A>.set_text ("")
        <B>end</B></A>

    <A NAME="f_display_history"><A HREF="../tracker/etf_main_window.html#f_display_history">display_history</A> (trace: LIST [STRING_8])
        <B>local</B>
            i: INTEGER_32
        <B>do</B>
            <B>from</B>
                i := 1
                trace.start
            <B>until</B>
                trace.after
            <B>loop</B>
                <A HREF="../tracker/etf_main_window_imp.html#f_history">history</A>.append_text (trace.item)
                <B>if</B> i &lt; trace.count <B>then</B>
                    <A HREF="../tracker/etf_main_window_imp.html#f_history">history</A>.append_text ("%N")
                <B>end</B>
                trace.forth
                i := i + 1
            <B>end</B>
        <B>end</B></A>
    
<B>feature</B> {NONE} <FONT COLOR="red">--</FONT><FONT COLOR="red"> Implementation</FONT>

    <A NAME="f_command_return_key_pressed"><A HREF="../tracker/etf_main_window.html#f_command_return_key_pressed">command_return_key_pressed</A>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Hit the return key to execute the typed command.</FONT>
        <B>do</B>
            <A HREF="../tracker/etf_main_window.html#f_execute_pressed">execute_pressed</A>
        <B>end</B></A>

    <A NAME="f_execute_pressed"><A HREF="../tracker/etf_main_window.html#f_execute_pressed">execute_pressed</A>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Called by </FONT><I>select_actions</I><FONT COLOR="red"> of </FONT><A HREF="../tracker/etf_main_window_imp.html#f_execute">execute</A><FONT COLOR="red">.</FONT>
        <B>local</B>
            cmd: STRING_8
        <B>do</B>
            cmd := <A HREF="../tracker/etf_main_window_imp.html#f_command">command</A>.text.as_string_8
            <A HREF="../tracker/etf_main_window.html#f_execute_command">execute_command</A> (cmd)
            <B>if</B> <B>not</B> <A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_error">error</A> <B>then</B>
                <B>if</B> <A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_history">history</A>.count = 1 <B>then</B>
                    <A HREF="../tracker/etf_main_window.html#f_session_file">session_file</A>.wipe_out
                <B>end</B>
                <A HREF="../tracker/etf_main_window.html#f_session_file">session_file</A>.open_append
                <A HREF="../tracker/etf_main_window.html#f_session_file">session_file</A>.put_string (cmd + "%N")
                <A HREF="../tracker/etf_main_window.html#f_session_file">session_file</A>.close
            <B>end</B>
        <B>end</B></A>

    <A NAME="f_reset_pressed"><A HREF="../tracker/etf_main_window.html#f_reset_pressed">reset_pressed</A>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Reset the history.</FONT>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Two consecutive clicks of 'reset' will also</FONT>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> wipe out the session file.</FONT>
        <B>do</B>
            <A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_reset">reset</A>
            <A HREF="../tracker/etf_main_window.html#f_clear_display">clear_display</A>
        <B>end</B></A>

    <A NAME="f_load_pressed"><A HREF="../tracker/etf_main_window.html#f_load_pressed">load_pressed</A>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Load the session file if it exists.</FONT>
        <B>local</B>
            fu: ETF_FILE_UTILITY
        <B>do</B>
            <B>create</B> fu.read_text_from (<A HREF="../tracker/etf_main_window.html#f_session_file_path">Session_file_path</A>)
            <B>if</B> fu.error <B>then</B>
                <A HREF="../tracker/etf_main_window.html#f_clear_display">clear_display</A>
                <A HREF="../tracker/etf_main_window_imp.html#f_status">status</A>.insert_text (fu.error_string)
            <B>else</B>
                <B>if</B> <B>not</B> <A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_history">history</A>.is_empty <B>then</B>
                    <A HREF="../tracker/etf_main_window.html#f_reset_pressed">reset_pressed</A>
                <B>end</B>
                fu.remove_comment_lines
                <B>across</B>
                    fu.items <B>as</B> cmd
                <B>loop</B>
                    <A HREF="../tracker/etf_main_window.html#f_execute_command">execute_command</A> (cmd.item)
                <B>end</B>
            <B>end</B>
        <B>end</B></A>
    
<B>feature</B> {NONE} 

    <A NAME="f_execute_command"><A HREF="../tracker/etf_main_window.html#f_execute_command">execute_command</A> (cmd: STRING_8)
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> Execute 'cmd' and</FONT>
            <FONT COLOR="red">--</FONT><FONT COLOR="red"> print off stack trace if there's any contract violation.</FONT>
        <B>local</B>
            problem: STRING_8
            error: BOOLEAN
        <B>do</B>
            <B>create</B> problem.make_empty
            <B>if</B> <B>not</B> error <B>then</B>
                <A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_execute_cmd">execute_cmd</A> (cmd)
                <A HREF="../tracker/etf_main_window.html#f_clear_display">clear_display</A>
                <A HREF="../tracker/etf_main_window.html#f_display_history">display_history</A> (<A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_history">history</A>)
                <A HREF="../tracker/etf_main_window_imp.html#f_status">status</A>.insert_text (<A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_status_message">status_message</A>)
                <A HREF="../tracker/etf_main_window_imp.html#f_output">output</A>.insert_text (<A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_output_message">output_message</A>)
                <B>if</B> <A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_error">error</A> <B>then</B>
                    <A HREF="../tracker/etf_main_window_imp.html#f_command">command</A>.set_text (cmd)
                <B>end</B>
            <B>else</B>
                problem.append ("%NThere was a problem:%N")
                <B>if</B> <B>attached</B> meaning (exception) <B>as</B> s <B>then</B>
                    problem.append ("  " + s + "%N")
                <B>end</B>
                <B>if</B> <B>attached</B> tag_name <B>as</B> s <B>then</B>
                    problem.append ("  Tag: " + s + "%N")
                <B>end</B>
                <B>if</B> <B>attached</B> exception_trace <B>as</B> s <B>then</B>
                    problem.append ("%NHere is the stack trace%N")
                    problem.append (s)
                    problem.append ("%NEnd of stack trace...%N")
                <B>end</B>
                <A HREF="../tracker/etf_main_window.html#f_clear_display">clear_display</A>
                <A HREF="../tracker/etf_main_window.html#f_display_history">display_history</A> (<A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_history">history</A>)
                <A HREF="../tracker/etf_main_window_imp.html#f_status">status</A>.insert_text (problem)
                <A HREF="../tracker/etf_main_window_imp.html#f_output">output</A>.insert_text (<A HREF="../tracker/etf_main_window.html#f_business_obj">business_obj</A>.<A HREF="../tracker/etf_model_facade.html#f_output_message">output_message</A>)
            <B>end</B>
        <B>rescue</B>
            error := <B>True</B>
            <B>retry</B>
        <B>end</B></A>
    
<B>end</B> <FONT COLOR="red">--</FONT> <FONT COLOR="red">class </FONT><A HREF="../tracker/etf_main_window.html">ETF_MAIN_WINDOW</A><TABLE BORDER="1" ALIGN="CENTER"><TR><TD><A HREF="../class_list.html">Classes</A></TD><TD><A HREF="../cluster_list.html">Clusters</A></TD><TD><A HREF="../cluster_hierarchy.html">Cluster hierarchy</A></TD><TD><A HREF="etf_main_window_chart.html">Chart</A></TD><TD><A HREF="etf_main_window_links.html">Relations</A></TD><TD>Text</TD><TD><A HREF="etf_main_window_flat.html">Flat</A></TD><TD><A HREF="etf_main_window_short.html">Contracts</A></TD><TD><A HREF="etf_main_window_flatshort.html">Flat contracts</A></TD></TR></TABLE></PRE>
<P ALIGN="CENTER"> &#045;&#045; Generated by ISE Eiffel &#045;&#045 </P>
<P ALIGN="CENTER">For more details: <A HREF="http://www.eiffel.com">www.eiffel.com</A></P>
</BODY>
</HTML>

